{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/lunashuqair/Desktop/nextjs/components/users/AddEdit.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\nimport { Link } from 'components';\nimport { userService, alertService } from 'services';\nexport { AddEdit };\n\nfunction AddEdit(props) {\n  var _errors$name, _errors$message;\n\n  const user = props === null || props === void 0 ? void 0 : props.user;\n  const isAddMode = !user;\n  const router = useRouter();\n  const {\n    0: showPassword,\n    1: setShowPassword\n  } = useState(false); // form validation rules \n\n  const validationSchema = Yup.object().shape({\n    // title: Yup.string()\n    //     .required('Title is required'),\n    name: Yup.string().required(' name is required'),\n    message: Yup.string().required('message is required')\n  });\n  const formOptions = {\n    resolver: yupResolver(validationSchema)\n  }; // set default form values if in edit mode\n\n  if (!isAddMode) {\n    const {\n      name,\n      message\n    } = user,\n          defaultValues = _objectWithoutProperties(user, [\"name\", \"message\"]);\n\n    formOptions.defaultValues = defaultValues;\n  } // get functions to build form with useForm() hook\n\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState\n  } = useForm(formOptions);\n  const {\n    errors\n  } = formState;\n\n  function onSubmit(data) {\n    return isAddMode ? createUser(data) : updateUser(user.id, data);\n  }\n\n  function createUser(data) {\n    return userService.create(data).then(() => {\n      alertService.success('Message added', {\n        keepAfterRouteChange: true\n      });\n      router.push('.');\n    }).catch(alertService.error);\n  }\n\n  function updateUser(id, data) {\n    return userService.update(id, data).then(() => {\n      alertService.success('Message updated', {\n        keepAfterRouteChange: true\n      });\n      router.push('..');\n    }).catch(alertService.error);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: isAddMode ? '' : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \" Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({\n          name: \"name\",\n          type: \"text\"\n        }, register('name')), {}, {\n          className: `form-control ${errors.name ? 'is-invalid' : ''}`\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$name = errors.name) === null || _errors$name === void 0 ? void 0 : _errors$name.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread(_objectSpread({\n          name: \"message\",\n          type: \"text\"\n        }, register('message')), {}, {\n          className: `form-control ${errors.message ? 'is-invalid' : ''}`\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$message = errors.message) === null || _errors$message === void 0 ? void 0 : _errors$message.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: formState.isSubmitting,\n        className: \"btn btn-primary mr-2\",\n        children: [formState.isSubmitting && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"spinner-border spinner-border-sm mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 48\n        }, this), \"Save\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => reset(formOptions.defaultValues),\n        type: \"button\",\n        disabled: formState.isSubmitting,\n        className: \"btn btn-secondary\",\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        href: \"/users\",\n        className: \"btn btn-link\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}","map":{"version":3,"sources":["/Users/lunashuqair/Desktop/nextjs/components/users/AddEdit.jsx"],"names":["useRouter","useState","useForm","yupResolver","Yup","Link","userService","alertService","AddEdit","props","user","isAddMode","router","showPassword","setShowPassword","validationSchema","object","shape","name","string","required","message","formOptions","resolver","defaultValues","register","handleSubmit","reset","formState","errors","onSubmit","data","createUser","updateUser","id","create","then","success","keepAfterRouteChange","push","catch","error","update","isSubmitting"],"mappings":"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","sourcesContent":["import { useRouter } from 'next/router';\nimport { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\n\nimport { Link } from 'components';\nimport { userService, alertService } from 'services';\n\nexport { AddEdit };\n\nfunction AddEdit(props) {\n    const user = props?.user;\n    const isAddMode = !user;\n    const router = useRouter();\n    const [showPassword, setShowPassword] = useState(false);\n    \n    // form validation rules \n    const validationSchema = Yup.object().shape({\n        // title: Yup.string()\n        //     .required('Title is required'),\n        name: Yup.string()\n            .required(' name is required'),\n        message: Yup.string()\n            .required('message is required'),\n    \n    });\n    const formOptions = { resolver: yupResolver(validationSchema) };\n\n    // set default form values if in edit mode\n    if (!isAddMode) {\n        const { name, message, ...defaultValues } = user;\n        formOptions.defaultValues = defaultValues;\n    }\n\n    // get functions to build form with useForm() hook\n    const { register, handleSubmit, reset, formState } = useForm(formOptions);\n    const { errors } = formState;\n\n    function onSubmit(data) {\n        return isAddMode\n            ? createUser(data)\n            : updateUser(user.id, data);\n    }\n\n    function createUser(data) {\n        return userService.create(data)\n            .then(() => {\n                alertService.success('Message added', { keepAfterRouteChange: true });\n                router.push('.');\n            })\n            .catch(alertService.error);\n    }\n\n    function updateUser(id, data) {\n        return userService.update(id, data)\n            .then(() => {\n                alertService.success('Message updated', { keepAfterRouteChange: true });\n                router.push('..');\n            })\n            .catch(alertService.error);\n    }\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)}>\n            <h1>{isAddMode ? '' : ''}</h1>\n            <div className=\"form-row\">\n                <div className=\"form-group col-5\">\n                    <label> Name</label>\n                    <input name=\"name\" type=\"text\" {...register('name')} className={`form-control ${errors.name ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.name?.message}</div>\n                </div>\n                <div className=\"form-group col-5\">\n                    <label>Message</label>\n                    <input name=\"message\" type=\"text\" {...register('message')} className={`form-control ${errors.message ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.message?.message}</div>\n                </div>\n            </div>\n            \n            <div className=\"form-group\">\n                <button type=\"submit\" disabled={formState.isSubmitting} className=\"btn btn-primary mr-2\">\n                    {formState.isSubmitting && <span className=\"spinner-border spinner-border-sm mr-1\"></span>}\n                    Save\n                </button>\n                <button onClick={() => reset(formOptions.defaultValues)} type=\"button\" disabled={formState.isSubmitting} className=\"btn btn-secondary\">Reset</button>\n                <Link href=\"/users\" className=\"btn btn-link\">Cancel</Link>\n            </div>\n        </form>\n    );\n}"]},"metadata":{},"sourceType":"module"}